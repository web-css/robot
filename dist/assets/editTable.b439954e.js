import{z as D,a as q,r as b,d,o as V,i as I,w as o,e,x,c as G,M as P,j as w,v as E,G as R,n as N,q as O}from"./index.a7421632.js";import{g as S,u as M}from"./gen.b412b430.js";import{o as Q}from"./type.71c3f3d6.js";import z from"./basicInfoForm.cb6689e5.js";import H from"./genInfoForm.17189d31.js";import"./menu.f282d9c5.js";const K={style:{float:"left"}},W={style:{float:"right",color:"#8492a6","font-size":"13px"}},J={style:{"text-align":"center","margin-left":"-100px","margin-top":"10px"}},A=N("\u63D0\u4EA4"),X=N("\u8FD4\u56DE"),Y=D({name:"GenEdit"}),ue=Object.assign(Y,{setup(Z){const _=q(),{proxy:c}=O(),g=b("columnInfo"),C=b(document.documentElement.scrollHeight-245+"px"),h=b([]),v=b([]),y=b([]),r=b({});function $(){const m=c.$refs.basicInfo.$refs.basicInfoForm,n=c.$refs.genInfo.$refs.genInfoForm;Promise.all([m,n].map(k)).then(s=>{if(s.every(i=>!!i)){const i=Object.assign({},r.value);i.columns=v.value,i.params={treeCode:r.value.treeCode,treeName:r.value.treeName,treeParentCode:r.value.treeParentCode,parentMenuId:r.value.parentMenuId},M(i).then(a=>{c.$modal.msgSuccess(a.msg),a.code===200&&U()})}else c.$modal.msgError("\u8868\u5355\u6821\u9A8C\u672A\u901A\u8FC7\uFF0C\u8BF7\u91CD\u65B0\u68C0\u67E5\u63D0\u4EA4\u5185\u5BB9")})}function k(m){return new Promise(n=>{m.validate(s=>{n(s)})})}function U(){const m={path:"/tool/gen",query:{t:Date.now(),pageNum:_.query.pageNum}};c.$tab.closeOpenPage(m)}return(()=>{const m=_.params&&_.params.tableId;m&&(S(m).then(n=>{v.value=n.data.rows,r.value=n.data.info,h.value=n.data.tables}),Q().then(n=>{y.value=n.data}))})(),(m,n)=>{const s=d("el-tab-pane"),u=d("el-table-column"),i=d("el-input"),a=d("el-option"),f=d("el-select"),p=d("el-checkbox"),B=d("el-table"),j=d("el-tabs"),T=d("el-button"),F=d("el-form"),L=d("el-card");return V(),I(L,null,{default:o(()=>[e(j,{modelValue:g.value,"onUpdate:modelValue":n[0]||(n[0]=l=>g.value=l)},{default:o(()=>[e(s,{label:"\u57FA\u672C\u4FE1\u606F",name:"basic"},{default:o(()=>[e(x(z),{ref:"basicInfo",info:r.value},null,8,["info"])]),_:1}),e(s,{label:"\u5B57\u6BB5\u4FE1\u606F",name:"columnInfo"},{default:o(()=>[e(B,{ref:"dragTable",data:v.value,"row-key":"columnId","max-height":C.value},{default:o(()=>[e(u,{label:"\u5E8F\u53F7",type:"index","min-width":"5%"}),e(u,{label:"\u5B57\u6BB5\u5217\u540D",prop:"columnName","min-width":"10%","show-overflow-tooltip":!0}),e(u,{label:"\u5B57\u6BB5\u63CF\u8FF0","min-width":"10%"},{default:o(l=>[e(i,{modelValue:l.row.columnComment,"onUpdate:modelValue":t=>l.row.columnComment=t},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(u,{label:"\u7269\u7406\u7C7B\u578B",prop:"columnType","min-width":"10%","show-overflow-tooltip":!0}),e(u,{label:"Java\u7C7B\u578B","min-width":"11%"},{default:o(l=>[e(f,{modelValue:l.row.javaType,"onUpdate:modelValue":t=>l.row.javaType=t},{default:o(()=>[e(a,{label:"Long",value:"Long"}),e(a,{label:"String",value:"String"}),e(a,{label:"Integer",value:"Integer"}),e(a,{label:"Double",value:"Double"}),e(a,{label:"BigDecimal",value:"BigDecimal"}),e(a,{label:"Date",value:"Date"}),e(a,{label:"Boolean",value:"Boolean"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),e(u,{label:"java\u5C5E\u6027","min-width":"10%"},{default:o(l=>[e(i,{modelValue:l.row.javaField,"onUpdate:modelValue":t=>l.row.javaField=t},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(u,{label:"\u63D2\u5165","min-width":"5%"},{default:o(l=>[e(p,{"true-label":"1","false-label":"0",modelValue:l.row.isInsert,"onUpdate:modelValue":t=>l.row.isInsert=t},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(u,{label:"\u7F16\u8F91","min-width":"5%"},{default:o(l=>[e(p,{"true-label":"1","false-label":"0",modelValue:l.row.isEdit,"onUpdate:modelValue":t=>l.row.isEdit=t},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(u,{label:"\u5217\u8868","min-width":"5%"},{default:o(l=>[e(p,{"true-label":"1","false-label":"0",modelValue:l.row.isList,"onUpdate:modelValue":t=>l.row.isList=t},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(u,{label:"\u67E5\u8BE2","min-width":"5%"},{default:o(l=>[e(p,{"true-label":"1","false-label":"0",modelValue:l.row.isQuery,"onUpdate:modelValue":t=>l.row.isQuery=t},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(u,{label:"\u67E5\u8BE2\u65B9\u5F0F","min-width":"10%"},{default:o(l=>[e(f,{modelValue:l.row.queryType,"onUpdate:modelValue":t=>l.row.queryType=t},{default:o(()=>[e(a,{label:"=",value:"EQ"}),e(a,{label:"!=",value:"NE"}),e(a,{label:">",value:"GT"}),e(a,{label:">=",value:"GTE"}),e(a,{label:"<",value:"LT"}),e(a,{label:"<=",value:"LTE"}),e(a,{label:"LIKE",value:"LIKE"}),e(a,{label:"BETWEEN",value:"BETWEEN"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),e(u,{label:"\u5FC5\u586B","min-width":"5%"},{default:o(l=>[e(p,{"true-label":"1","false-label":"0",modelValue:l.row.isRequired,"onUpdate:modelValue":t=>l.row.isRequired=t},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(u,{label:"\u663E\u793A\u7C7B\u578B","min-width":"12%"},{default:o(l=>[e(f,{modelValue:l.row.htmlType,"onUpdate:modelValue":t=>l.row.htmlType=t},{default:o(()=>[e(a,{label:"\u6587\u672C\u6846",value:"input"}),e(a,{label:"\u6587\u672C\u57DF",value:"textarea"}),e(a,{label:"\u4E0B\u62C9\u6846",value:"select"}),e(a,{label:"\u5355\u9009\u6846",value:"radio"}),e(a,{label:"\u590D\u9009\u6846",value:"checkbox"}),e(a,{label:"\u65E5\u671F\u63A7\u4EF6",value:"datetime"}),e(a,{label:"\u56FE\u7247\u4E0A\u4F20",value:"imageUpload"}),e(a,{label:"\u6587\u4EF6\u4E0A\u4F20",value:"fileUpload"}),e(a,{label:"\u5BCC\u6587\u672C\u63A7\u4EF6",value:"editor"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),e(u,{label:"\u5B57\u5178\u7C7B\u578B","min-width":"12%"},{default:o(l=>[e(f,{modelValue:l.row.dictType,"onUpdate:modelValue":t=>l.row.dictType=t,clearable:"",filterable:"",placeholder:"\u8BF7\u9009\u62E9"},{default:o(()=>[(V(!0),G(R,null,P(y.value,t=>(V(),I(a,{key:t.dictType,label:t.dictName,value:t.dictType},{default:o(()=>[w("span",K,E(t.dictName),1),w("span",W,E(t.dictType),1)]),_:2},1032,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data","max-height"])]),_:1}),e(s,{label:"\u751F\u6210\u4FE1\u606F",name:"genInfo"},{default:o(()=>[e(x(H),{ref:"genInfo",info:r.value,tables:h.value},null,8,["info","tables"])]),_:1})]),_:1},8,["modelValue"]),e(F,{"label-width":"100px"},{default:o(()=>[w("div",J,[e(T,{type:"primary",onClick:n[1]||(n[1]=l=>$())},{default:o(()=>[A]),_:1}),e(T,{onClick:n[2]||(n[2]=l=>U())},{default:o(()=>[X]),_:1})])]),_:1})]),_:1})}}});export{ue as default};
