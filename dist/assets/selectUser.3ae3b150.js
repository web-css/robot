import{z as D,r as c,A as L,d as s,o as A,i as P,w as l,j as w,e,h as y,x as Q,v as E,B as F,C as O,n as f,q as G}from"./index.a7421632.js";import{u as H,d as J}from"./role.b45c5a26.js";const M=f("\u641C\u7D22"),W=f("\u91CD\u7F6E"),X={class:"dialog-footer"},Y=f("\u786E \u5B9A"),Z=f("\u53D6 \u6D88"),ee=D({name:"SelectUser"}),le=Object.assign(ee,{props:{roleId:{type:[Number,String]}},emits:["ok"],setup(N,{expose:S,emit:C}){const I=N,{proxy:u}=G(),{sys_normal_disable:V}=u.useDict("sys_normal_disable"),h=c([]),i=c(!1),_=c(0),v=c([]),n=L({pageNum:1,pageSize:10,roleId:void 0,userName:void 0,phonenumber:void 0});function k(){n.roleId=I.roleId,g(),i.value=!0}function U(a){u.$refs.refTable.toggleRowSelection(a)}function x(a){v.value=a.map(o=>o.userId)}function g(){H(n).then(a=>{h.value=a.rows,_.value=a.total})}function d(){n.pageNum=1,g()}function R(){u.resetForm("queryRef"),d()}function T(){const a=n.roleId,o=v.value.join(",");if(o==""){u.$modal.msgError("\u8BF7\u9009\u62E9\u8981\u5206\u914D\u7684\u7528\u6237");return}J({roleId:a,userIds:o}).then(p=>{u.$modal.msgSuccess(p.msg),p.code===200&&(i.value=!1,C("ok"))})}return S({show:k}),(a,o)=>{const p=s("el-input"),b=s("el-form-item"),m=s("el-button"),K=s("el-form"),r=s("el-table-column"),q=s("dict-tag"),z=s("el-table"),B=s("pagination"),$=s("el-row"),j=s("el-dialog");return A(),P(j,{title:"\u9009\u62E9\u7528\u6237",modelValue:i.value,"onUpdate:modelValue":o[5]||(o[5]=t=>i.value=t),width:"800px",top:"5vh","append-to-body":""},{footer:l(()=>[w("div",X,[e(m,{type:"primary",onClick:T},{default:l(()=>[Y]),_:1}),e(m,{onClick:o[4]||(o[4]=t=>i.value=!1)},{default:l(()=>[Z]),_:1})])]),default:l(()=>[e(K,{model:n,ref:"queryRef",inline:!0},{default:l(()=>[e(b,{label:"\u7528\u6237\u540D\u79F0",prop:"userName"},{default:l(()=>[e(p,{modelValue:n.userName,"onUpdate:modelValue":o[0]||(o[0]=t=>n.userName=t),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D\u79F0",clearable:"",onKeyup:y(d,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(b,{label:"\u624B\u673A\u53F7\u7801",prop:"phonenumber"},{default:l(()=>[e(p,{modelValue:n.phonenumber,"onUpdate:modelValue":o[1]||(o[1]=t=>n.phonenumber=t),placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\u7801",clearable:"",onKeyup:y(d,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(b,null,{default:l(()=>[e(m,{type:"primary",icon:"Search",onClick:d},{default:l(()=>[M]),_:1}),e(m,{icon:"Refresh",onClick:R},{default:l(()=>[W]),_:1})]),_:1})]),_:1},8,["model"]),e($,null,{default:l(()=>[e(z,{onRowClick:U,ref:"refTable",data:h.value,onSelectionChange:x,height:"260px"},{default:l(()=>[e(r,{type:"selection",width:"55"}),e(r,{label:"\u7528\u6237\u540D\u79F0",prop:"userName","show-overflow-tooltip":!0}),e(r,{label:"\u7528\u6237\u6635\u79F0",prop:"nickName","show-overflow-tooltip":!0}),e(r,{label:"\u90AE\u7BB1",prop:"email","show-overflow-tooltip":!0}),e(r,{label:"\u624B\u673A",prop:"phonenumber","show-overflow-tooltip":!0}),e(r,{label:"\u72B6\u6001",align:"center",prop:"status"},{default:l(t=>[e(q,{options:Q(V),value:t.row.status},null,8,["options","value"])]),_:1}),e(r,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",width:"180"},{default:l(t=>[w("span",null,E(a.parseTime(t.row.createTime)),1)]),_:1})]),_:1},8,["data"]),F(e(B,{total:_.value,page:n.pageNum,"onUpdate:page":o[2]||(o[2]=t=>n.pageNum=t),limit:n.pageSize,"onUpdate:limit":o[3]||(o[3]=t=>n.pageSize=t),onPagination:g},null,8,["total","page","limit"]),[[O,_.value>0]])]),_:1})]),_:1},8,["modelValue"])}}});export{le as default};
